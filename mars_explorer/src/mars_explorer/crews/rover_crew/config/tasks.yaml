final_nodes:
  description: >
    Based on the information inside the input file """ {{report_priority}} """, identify in which nodes rovers need to perform their tasks.
  expected_output: >
    A Python list containing all the node IDs where rovers need to perform their tasks.
  agent: extractor

reporting_route:
  description: >
    Using the list of rovers provided in the input """ {{rovers}} """,
    and the list of target nodes provided in """ {{context.final_nodes}} """,
    you MUST call the tool Multi_Rover_Route_Calculator exactly once.

    The tool will automatically extract each rover's location and energy
    and compute the shortest distance from each rover to every target node.

    Do NOT recompute paths manually.
    Do NOT modify, filter, or reinterpret the tool output.
    Simply return the result exactly as produced by the tool.

  expected_output: >
    A JSON dictionary indexed by rover ID.
    Each rover ID maps to an object containing:
      - the rover location
      - the rover energy
      - a dictionary with distances to all target nodes

    Output format:
    {
      "rover_0": {
        "location": "N30",
        "energy": 95,
        "output_nodes_length": {
          "N70": 48.3,
          "N10": 12.1
        }
      },
      "rover_1": {
        "location": "N84",
        "energy": 94,
        "output_nodes_length": {
          "N70": 9.7,
          "N10": null
        }
      }
    }

  agent: route_planner

# task_ranking:
#   description: >
#     Input Data: {{routes_rover}}

#     ACTION REQUIRED:
#       1. Extract the JSON/Dictionary from the input.
#       2. Call 'Multi_Rover_Node_Assigner' tool using that data as the 'rover_results' parameter.

#     STRICT RESTRICTIONS:
#       DO NOT summarize the data.,
#       DO NOT explain why you are calling the tool.,
#       DO NOT attempt to assign rovers to nodes manually.,
#       If the input is empty, return an empty dictionary through the tool.
#   expected_output: >
#     The raw JSON output from the Multi_Rover_Node_Assigner tool without any preamble.
#   agent: ranking

task_ranking:
  description: >
    You have been provided with rover route and energy data (found in the routes_rover input).
    
    Your SOLE task is to:
    1. Take the provided 'routes_rover' dictionary.
    2. Pass it DIRECTLY into the 'Multi_Rover_Node_Assigner' tool as the 'rover_results' argument.
    
    Do NOT attempt to process, summarize, or manually assign the rovers yourself. 
    The tool handles all calculations.
    The input routes_rover is in """ {{context.reporting_route}} """"
  expected_output: >
    The final assignments dictionary produced by the tool.
  agent: ranking



reporting_sampling:
  description: >
    Analyze the goals in """ {{report_priority}} """ for the rovers.
    For each unique goal/terrain combination found in the file, write a detailed procedure in Markdown.
    Generates a detailed report of all samples to be collected, including the type of sample, sensors used, collection procedure, and any relevant observations.
  expected_output: >
    A Markdown file ('sample_collector_drone.md') containing the 10-step procedures for the identified targets.
  agent: sample_collector
