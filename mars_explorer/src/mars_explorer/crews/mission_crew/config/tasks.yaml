additional_information:
  description: >
    Your ONLY job is to take the entire raw text provided in 'mission_report' 
    and pass it UNCHANGED to the 'planner_divide_report' tool in the 'markdown_report' argument.
    
    Do NOT try to extract nodes or terrains yourself. 
    Do NOT summarize. 
    Pass the raw markdown exactly as it is: """ {{mission_report}} """
  expected_output: >
    The raw dictionary output from the planner_divide_report tool.
  agent: planner

reporting_priority:
  description: >
    Transforms a raw mission JSON loaded as an str """ {{context.additional_information}} """ into a structured asset-based task list. It parses scientific goals and matches them to the correct explorer (Rover, Drone, or Satellite) based on strict keyword-based classification rules and priority levels. 
  expected_output: >
    A JSON object categorized by asset type (rover, drone, satellite), with each category containing sub-objects for 'high', 'medium', and 'low' priority tasks. Each task must include the exact text from the original goal and its related priority description.
  agent: priority

reporting_hazard:
  description: >
    Task Description:
      1. Extract: Isolate the operational constraints from the provided input """ {{context.additional_information}} """.
      2. Classify: Categorize each constraint into rovers, drones, or satellites. If a constraint applies to multiple (e.g., "Drones and Rovers..."), include it in both.
      3. Hazard Mapping: For each constraint, check the known hazards list. If a hazard (like "unstable rocky terrain") directly triggers or relates to a constraint (like "Rovers may not operate in terrain classified as unstable"), you must map the specific Nodes from the hazard list to that constraint. Moreover, remove the constraint if it maps to a hazard.
    Format: Output the final result as a valid JSON object following the provided structure.
  expected_output: >
    A single JSON object with the following keys: rovers, drones, and satellites. Each category must contain:
    - operational constraints: A list of strings.
    - hazards: An object where the key is the full text of the operational constraint and the value is a list of node IDs (e.g., ["N4", "N19", "N128"]) affected by that specific hazard.
  agent: hazard


reporting_aggregation:
  description: >
    Task Description:
      1. Fetch Data: Retrieve the scientific priorities from """ {{context.reporting_priority}} """ and the hazard mappings from """ {{context.reporting_hazard}} """.
      2. Align Assets: Match the "rover", "drone", and "satellite" data from both sources.
      3. Nest Priorities: Place the high, medium, and low priority scientific goals inside a new "priority" key for each asset.
      4. Append Constraints: Add the "operational constraints" and the mapped "hazards" directly under the asset level.
    Format: Output the final result as a valid, deeply nested JSON object.
  expected_output: >
    A single JSON object with top-level keys for rovers, drones, and satellites. 
    Each asset must have:
    - priority: { high: [], medium: [], low: [] }
    - operational constraints: []
    - hazards: {}
  agent: aggregator


